# Release Runbook - v1.0.0

**Quick, focused, ready-to-execute guide for shipping v1.0.0**

---

## 0) Pre-Tag Checklist (2 minutes)

- [ ] **Update badge URLs** in `README.md`:
  - Replace `your-org/AgentsSystemV2` → `<owner>/<repo>` (4 instances: lines 3, 4, 9, 77)
  - See `docs/README_BADGE_UPDATE.md` for details

- [ ] **Update CODEOWNERS** (optional):
  - Replace `@your-org/your-team` → actual GitHub teams/users
  - Or remove if not using CODEOWNERS feature

---

## 1) Final Checks (30-60 seconds)

**Linux/macOS**:
```bash
python cli.py --version                         # Expected: 1.0.0
python cli.py --pipeline pipeline/production.yaml --dry-run --export-graph out/pipeline.dot
python scripts/smoke_test.py --skip-slow --json
```

**Windows (PowerShell)**:
```powershell
python cli.py --version
python cli.py --pipeline pipeline/production.yaml --dry-run --export-graph out/pipeline.dot
python scripts/smoke_test.py --skip-slow --json
```

**Expected Results**:
- Version: `1.0.0` ✅
- Dry-run: Pipeline validates ✅
- Graph: `out/pipeline.dot` created ✅
- Smoke: 2/3 tests pass (expected) ✅

---

## 2) Tag & Push (One-Click Scripts)

**Bash**:
```bash
# Commit + Tag + Push (with optional signing)
CREATE_TAG=true SIGN_TAG=true TAG_NAME=v1.0.0 ./scripts/commit_push.sh
```

**PowerShell**:
```powershell
.\scripts\commit_push.ps1 -CreateTag:$true -SignTag:$true -TagName "v1.0.0"
```

**What it does**:
- Runs pre-commit, ruff, mypy
- Runs tests & smoke tests
- Builds API docs (if pdoc available)
- Exports pipeline graph
- Commits all changes
- Creates signed tag `v1.0.0`
- Pushes to remote

---

## 3) Create GitHub Release

1. Go to: `https://github.com/<owner>/<repo>/releases/new`

2. **Tag**: `v1.0.0`

3. **Title**: `Release v1.0.0`

4. **Body**: Copy from `docs/GITHUB_RELEASE_SHORT_v1.0.0.md` (ultra-short) or `GITHUB_RELEASE_BODY_v1.0.0.md` (full)

5. **Assets** (optional, auto-generated by CI):
   - `sbom/sbom.json`
   - `sbom/sbom.xml`
   - `out/pipeline.dot`
   - `out/smoke/SMOKE_SUMMARY.md`
   - `pipeline/production.yaml`

**Note**: The `release-bundle.yml` workflow will automatically attach assets on tag push.

---

## 4) Post-Release Bump → 1.0.1-dev

**Bash**:
```bash
./scripts/post_release_bump.sh 1.0.0 1.0.1-dev
git add -A && git commit -m "chore: bump version to 1.0.1-dev" && git push
```

**PowerShell**:
```powershell
.\scripts\post_release_bump.ps1 -CurrentVersion "1.0.0" -NextVersion "1.0.1-dev"
git add -A; git commit -m "chore: bump version to 1.0.1-dev"; git push
```

**What it does**:
- Updates `src/__init__.py`: `__version__ = "1.0.1-dev"`
- Updates `pyproject.toml`: `version = "1.0.1-dev"`
- Commits and pushes

---

## 5) Trigger Automations & Nightly

### Manual Actions

1. **Hard Tests Nightly** (first manual run):
   - Go to Actions → `hard-tests-nightly.yml` → Run workflow
   - Verify KPIs are generated in artifacts

2. **Verify Workflows Running**:
   - Release Drafter ✅ (runs on PRs)
   - Coverage ✅ (runs on push/PR)
   - SBOM ✅ (runs on release)
   - CodeQL ✅ (runs weekly + on PRs)
   - Labels Sync ✅ (runs on label changes)

### Secrets Check (if private repo)

- [ ] `CODECOV_TOKEN` set (if repo is private)
- See `docs/CI_SECRETS.md` for details

---

## 6) 30-90 Day Monitoring (Ready)

**Track these metrics** (see `docs/POST_RELEASE_MONITORING.md`):

- **Nightly Tests**: ≥ 95% green rate
- **Performance**: Runtime ↓ 20% in `hard_test.yaml` pipeline
- **Coverage**: Overall ≥ 85%, Core ≥ 95%
- **Plugins**: ≥ 1 external plugin passes CI

**Reports**:
- Weekly: Review GitHub Actions status, Codecov trends, KPI reports
- Monthly: Aggregate metrics, compare to targets, identify regressions

---

## 7) Open v1.1 (Automatic)

**Bash**:
```bash
chmod +x scripts/create_v1.1_issues.sh
./scripts/create_v1.1_issues.sh
```

**PowerShell**:
```powershell
.\scripts\create_v1.1_issues.sh
```

**What it creates**:
- Milestone: `v1.1.0`
- Issue 1: Promote multiagent new to GA
- Issue 2: Pipelines Gallery
- Issue 3: Plugin API Tests
- Issue 4: PyPI Publishing
- Issue 5: Artifact Retention Policy v2

**Requires**: `gh` CLI installed and authenticated

---

## Rollback (If Something Breaks)

```bash
# Revert commit
git revert <commit_sha>

# Create patch tag
git tag v1.0.1

# Push
git push origin main --tags
```

**Details**: See `docs/ROLLBACK_PLAN.md`

---

## Go-for-Release Checklist

- [ ] README badges updated to `<owner>/<repo>`
- [ ] `python cli.py --version` shows `1.0.0`
- [ ] Dry-run + smoke (quick) pass
- [ ] `scripts/commit_push.(sh|ps1)` runs without errors
- [ ] Release created on GitHub with short body
- [ ] Post-release bump to `1.0.1-dev` completed
- [ ] Nightly triggered manually (first time)
- [ ] Milestone/Issues for v1.1 created

---

## One-Click Release (All-in-One)

**For automated release with all steps**:

**Bash**:
```bash
./scripts/release_all.sh
```

**PowerShell**:
```powershell
.\scripts\release_all.ps1
```

See `scripts/release_all.sh` and `scripts/release_all.ps1` for complete automation.

---

**Last Updated**: 2025-01-12  
**Version**: 1.0.0

